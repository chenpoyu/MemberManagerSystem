<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<div th:fragment="jsFragment">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
	
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
		integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
		crossorigin="anonymous"></script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
		integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
		crossorigin="anonymous"></script>

	<script type="text/javascript" src="js/common/regexRule.js"></script>
	
	<script type="text/javascript">
		$.ajaxSetup({
			//dataType: 'json'
		    contentType: 'application/json; charset=UTF-8'
			, beforeSend: function(request) {
			   request.setRequestHeader("token", $.cookie('token'));
			}
	        , statusCode: {
	            401: function (response) {
	            	logout();
	            }
	        }
		});

		$(function() {
			if ($.cookie('token')) {
			    $('#username').html('<i class="zmdi zmdi-account zmdi-hc-fw"></i>' + $.cookie('username'));
			    $('#logout').show();
			} else {
			    $('#username').html('');
			    $('#logout').hide();
			    $('#navbarButton').hide();
			}
		    $('#logout').bind("click", logout);
		});
		
		function logout() {
			$.removeCookie('token');
			$.removeCookie('username');
        	$(location).attr('href', "./");
		}
	</script>
</div>

<!-- Footer -->
<footer class="fixed-bottom font-small text-light bg-dark" th:fragment="copyFragment">
	<!-- Copyright -->
	<div class="footer-copyright text-center py-3">
		All rights reserved. &copy; 2019 Poyu.Chen
	</div>
	<!-- Copyright -->
</footer>
